!function(t){"use strict";function e(){function t(t,e,n){n?s(t,"",e):i(t,"",e)}function e(e){var n=!e.state||!e.state.name,a=n?f.matchPath(p(f.options)):e.state,o=f.options,r=o.defaultRoute,i=o.defaultParams;if(!a)return void f.navigate(r,i,{reload:!0,replace:!0});if(!f.lastKnownState||!f.areStatesEqual(a,f.lastKnownState,!0)){var s=v({},f.getState());f._transition(a,s,function(e,o){if(e)if("CANNOT_DEACTIVATE"===e){var u=f.buildUrl(f.lastKnownState.name,f.lastKnownState.params);n||t(a,u,!0)}else f.navigate(r,i,{reload:!0,replace:!0});else f._invokeListeners("$$success",o,s,{replace:!n})})}}function n(t){f=t,f.getLocation=function(){return p(f.options)}}function a(){f.options.useHash&&!f.options.base&&(f.options.base=r()),u(e)}function o(){c(e)}function l(e,n,a){t(e,f.buildUrl(e.name,e.params),a.replace||a.reload)}var f=void 0;return{name:h,init:n,onStart:a,onStop:o,onTransitionSuccess:l,onPopState:e}}var n=function(t){return function(){return t}},a=function(){},o="undefined"!=typeof t,r=function(){return t.location.pathname.replace(/\/$/,"")},i=function(e,n,a){return t.history.pushState(e,n,a)},s=function(e,n,a){return t.history.replaceState(e,n,a)},u=function(e){return t.addEventListener("popstate",e)},c=function(e){return t.removeEventListener("popstate",e)},p=function(e){var n=e.useHash?t.location.hash.replace(new RegExp("^#"+e.hashPrefix),""):t.location.pathname.replace(new RegExp("^"+e.base),"");return n+t.location.search},l=function(){return t.history.state},f={};f=o?{getBase:r,pushState:i,replaceState:s,addPopstateListener:u,removePopstateListener:c,getLocation:p,getState:l}:{getBase:n(""),pushState:a,replaceState:a,addPopstateListener:a,removePopstateListener:a,getLocation:n(""),getState:n(null)};var v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},h="HISTORY";t.router5HistoryPlugin=e}(window);