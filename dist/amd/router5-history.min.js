define("router5HistoryPlugin",[],function(){"use strict";function t(){function t(t,e,n){n?i(t,"",e):r(t,"",e)}function e(e){var n=!e.state||!e.state.name,a=n?w.matchPath(c(w.options)):e.state,o=w.options,r=o.defaultRoute,i=o.defaultParams;if(!a)return void w.navigate(r,i,{reload:!0,replace:!0});if(!w.lastKnownState||!w.areStatesEqual(a,w.lastKnownState,!0)){var s=l({},w.getState());w._transition(a,s,function(e,o){if(e)if("CANNOT_DEACTIVATE"===e){var u=w.buildUrl(w.lastKnownState.name,w.lastKnownState.params);n||t(a,u,!0)}else w.navigate(r,i,{reload:!0,replace:!0});else w._invokeListeners("$$success",o,s,{replace:!0})})}}function n(t){w=t,w.getLocation=function(){return c(w.options)}}function a(){w.options.useHash&&!w.options.base&&(w.options.base=o()),s(e)}function p(){u(e)}function d(e,n,a){t(e,w.buildUrl(e.name,e.params),a.replace||a.reload)}var w=void 0;return{name:f,init:n,onStart:a,onStop:p,onTransitionSuccess:d,onPopState:e}}var e=function(t){return function(){return t}},n=function(){},a="undefined"!=typeof window,o=function(){return window.location.pathname.replace(/\/$/,"")},r=function(t,e,n){return window.history.pushState(t,e,n)},i=function(t,e,n){return window.history.replaceState(t,e,n)},s=function(t){return window.addEventListener("popstate",t)},u=function(t){return window.removeEventListener("popstate",t)},c=function(t){var e=t.useHash?window.location.hash.replace(new RegExp("^#"+t.hashPrefix),""):window.location.pathname.replace(new RegExp("^"+t.base),"");return e+window.location.search},p={};p=a?{getBase:o,pushState:r,replaceState:i,addPopstateListener:s,removePopstateListener:u,getLocation:c}:{getBase:e(""),pushState:n,replaceState:n,addPopstateListener:n,removePopstateListener:n,getLocation:e("")};var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},f="HISTORY";return t});