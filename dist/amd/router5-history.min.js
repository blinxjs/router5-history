define("router5HistoryPlugin",function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},t=function(e){return function(){return e}},a=function(){},n="undefined"!=typeof window,r=function(){return window.location.pathname.replace(/\/$/,"")},o=function(e,t,a){return window.history.pushState(e,t,a)},i=function(e,t,a){return window.history.replaceState(e,t,a)},s=function(e){return window.addEventListener("popstate",e)},c=function(e){return window.removeEventListener("popstate",e)},u=function(e){var t=e.useHash?window.location.hash.replace(new RegExp("^#"+e.hashPrefix),""):window.location.pathname.replace(new RegExp("^"+e.base),"");return(t||"/")+window.location.search},p=function(){return window.history.state},l={};l=n?{getBase:r,pushState:o,replaceState:i,addPopstateListener:s,removePopstateListener:c,getLocation:u,getState:p}:{getBase:t(""),pushState:a,replaceState:a,addPopstateListener:a,removePopstateListener:a,getLocation:t(""),getState:t(null)};var f=l,d=f.pushState,v=f.replaceState,w=f.addPopstateListener,g=f.removePopstateListener,S=f.getLocation,h=f.getBase,m=f.getState,L="HISTORY",P=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],a=t.forceDeactivate;return function(t){t.getLocation=function(){return S(t.options)};var n=function(e,t,a){a?v(e,"",t):d(e,"",t)},r=function(r){var o=!r.state||!r.state.name,i=o?t.matchPath(S(t.options)):r.state,s=t.options,c=s.defaultRoute,u=s.defaultParams;if(!i)return void t.navigate(c,u,{forceDeactivate:a,reload:!0,replace:!0});if(!t.lastKnownState||!t.areStatesEqual(i,t.lastKnownState,!1)){var p=e({},t.getState());t._transition(i,p,{forceDeactivate:a},function(e,r){if(e)if(e.redirect)t.navigate(e.redirect.name,e.redirect.params,{forceDeactivate:a,replace:!0});else if("CANNOT_DEACTIVATE"===e){var s=t.buildUrl(t.lastKnownState.name,t.lastKnownState.params);o||n(i,s,!0)}else t.navigate(c,u,{forceDeactivate:a,reload:!0,replace:!0});else t._invokeListeners("$$success",r,p,{replace:!0})})}},o=function(){t.options.useHash&&!t.options.base&&(t.options.base=h()),w(r)},i=function(){g(r)},s=function(e,a,r){var o=m(),i=r.replace||a&&t.areStatesEqual(e,a)||r.reload&&o&&t.areStatesEqual(e,o);n(e,t.buildUrl(e.name,e.params),i)};return{name:L,onStart:o,onStop:i,onTransitionSuccess:s,onPopState:r}}};return P});